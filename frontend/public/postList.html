<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>게시글 목록</title>
    <style>
        body {
          font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", sans-serif;
          background: #f8fafc;
          margin: 0; padding: 20px;
        }
        header {
          display: flex; justify-content: space-between; align-items: center;
          margin-bottom: 20px;
        }
        header h1 { margin: 0; font-size: 22px; }
        header a {
          background: #2563eb; color: white; padding: 8px 14px; border-radius: 8px;
          text-decoration: none; font-size: 14px; font-weight: 600;
        }
        .posts {
          display: grid; gap: 16px;
          grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        }
        .post {
          background: white; padding: 16px; border-radius: 10px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.05);
          transition: transform 0.1s;
        }
        .post:hover { transform: translateY(-2px); }
        .post h2 {
          margin: 0 0 6px 0; font-size: 18px;
        }
        .post p {
          margin: 0; color: #475569; font-size: 14px;
        }
        .meta {
          margin-top: 8px; font-size: 13px; color: #94a3b8;
          display: flex; justify-content: space-between;
        }
    </style>
</head>
<body>
<header>
    <h1>게시판</h1>
    <div>
        <a href="/signup.html">회원가입</a>
        <a href="/login.html">로그인</a>
    </div>
</header>

<section class="posts" id="postsContainer"></section>

<script>
    async function loadPosts() {
      const container = document.getElementById('postsContainer');
      container.innerHTML = '<p>로딩 중...</p>';

      try {
        const resp = await fetch('/api/v1/posts');
        if (!resp.ok) throw new Error('불러오기 실패');
        const posts = await resp.json();

        if (posts.length === 0) {
          container.innerHTML = '<p>게시글이 없습니다.</p>';
          return;
        }

        container.innerHTML = posts.map(p => `
          <article class="post">
            <h2>${p.title}</h2>
            <p>${p.contents.substring(0, 60)}...</p>
            <div class="meta">
              <span>작성자: ${p.authorNickname || '익명'}</span>
              <span>${new Date(p.createdAt).toLocaleString('ko-KR')}</span>
            </div>
          </article>
        `).join('');
      } catch (err) {
        container.innerHTML = '<p style="color:red;">게시글을 불러오는 중 오류가 발생했습니다.</p>';
        console.error(err);
      }
    }

    loadPosts();
</script>
</body>
</html>
